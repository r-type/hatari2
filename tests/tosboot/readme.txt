Files
-----

Tools and data files:
Makefile      -- builds the test program and floppy & HD images
                 containing it
disk/*        -- sources, binaries and input files for test program,
                 directory is also used for GEMDOS HD emu testing
floppy/*      -- files to autostart test program from floppy
tos_tester.py -- test driver, described below

Generated files:
output/*      -- Test report and screenshots, temporary output files
dummy.cfg     -- Hatari config file generated by test driver
blank-a.st.gz -- blank floppy image to avoid TOS disk dialogs
floppy.st.gz  -- floppy image with the test program / files
hd.img        -- HD image with the the test program / files
                 and DOS partition table

Other files and directories:
readme.txt -- this text file
tos/*      -- TOSDIR in Makefile points here for your TOS images



Usage
-----

If you want to test Hatari version that isn't in your PATH,
you need to give PATH for the Hatari binary you want to test,
like this:
	PATH=../../build/src:$PATH make

Or when calling TOS tester and specifying TOS images directly:
	PATH=../../build/src:$PATH ./tos_tester.py <TOS images>

To view the produced screenshots, either use ImageMagick:
	display output/*.png

Or use the script that creates a HTML page with them and opens
browser to view it.


What TOS tester tests
---------------------

These are the HW configurations combinations that TOS tester currently
supports:

* ST, STE, TT, Falcon machine types

  EmuTOS 512k is tested for all the machine types, EmuTOS 192/256k and
  TOS v2.x with all except Falcon, rest of TOSes are tested only with
  a single machine type.

* TV, VGA, RGB and monochrome monitors and 1 & 4 plane VDI modes

* Different amounts of memory

* With and without GEMDOS harddisk directory emulation

* Arbitrary boolean Hatari command line options

You can use the command line options to specify which set of these
is used and TOS tester will go through all combinations of them.


What to test
------------

For each Hatari release it would be good to test e.g. the following
TOS versions:
  v1.00 de, v1.02 de, v1.04 de, v1.04 us, v1.62 de, v1.62 us,
  v2.06 de, v3.06 us, v4.04, etos192k, etos512k[1]

[1] Just the latest release of EmuTOS.

And following monitor configurations:
  ST:     tv,  mono, vdi-1, vdi-4
  STE:    rgb, mono, vdi-1, vdi-4
  TT:     vga, mono, vdi-1, vdi-4
  Falcon: rgb, mono, vga

Memory configurations:
  ST:   0.5 &  2 MB
  STE:    1 &  4 MB
  TT:     2 & 10 MB
  Falcon: 4 & 14 MB

And both with GEMDOS HD and just floppy.

Testing should be done both for old UAE CPU core and the new WinUAE
one.  This should give good enough coverage of all the possible bootup
issues.

Note that it's enought to give the whole set of HW configurations to
TOS tester, it will automatically select a suitable subset of HW
combinations to test, for each given TOS versions.


TODO
----

Do more testing and add some usage examples.

Testing program for GEMDOS HD emulation should test also file
redirection.

--

Add testing of ASCI and IDE drives in addition to the GEMDOS HD and
floppy tests.

This isn't very straightforward because both need different drivers
and therefore different disk images and the drivers either have issues
with e.g. EmuTOS, or don't support all machines.  Formatting and
installing the drivers requires using interactive Atari programs,
so these images cannot be automatically (re-)generated.

EmuTOS supports directly HDs with DOS (not Atari) partition table,
but only for ASCI.  Maybe that could be tested first, possibly with
a disk having also MiNT (= WinUAE / MMU testing at the same time).
